// This file is automatically generated by Keystone, do not modify it manually.
// Modify your Keystone config when you want to change this.

datasource sqlite {
  url               = env("DATABASE_URL")
  shadowDatabaseUrl = env("SHADOW_DATABASE_URL")
  provider          = "sqlite"
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id       String @id @default(cuid())
  name     String @default("")
  email    String @unique @default("")
  password String
}

model Department {
  id                      String    @id @default(cuid())
  name                    String    @default("")
  students                Student[] @relation("Student_department")
  teachers                Teacher[] @relation("Teacher_department")
  from_Subject_department Subject[] @relation("Subject_department")
}

model Teacher {
  id                   String      @id @default(cuid())
  name                 String      @default("")
  email                String      @unique @default("")
  department           Department? @relation("Teacher_department", fields: [departmentId], references: [id])
  departmentId         String?     @map("department")
  students             Student[]   @relation("Student_mentor")
  from_Subject_teacher Subject[]   @relation("Subject_teacher")

  @@index([departmentId])
}

model Student {
  id                      String       @id @default(cuid())
  name                    String       @default("")
  rollNumber              String       @unique @default("")
  department              Department?  @relation("Student_department", fields: [departmentId], references: [id])
  departmentId            String?      @map("department")
  semester                String?
  mentor                  Teacher?     @relation("Student_mentor", fields: [mentorId], references: [id])
  mentorId                String?      @map("mentor")
  subjects                Subject[]    @relation("Student_subjects")
  profilePhoto_id         String?
  profilePhoto_filesize   Int?
  profilePhoto_width      Int?
  profilePhoto_height     Int?
  profilePhoto_extension  String?
  joinedAt                DateTime?    @default(now())
  from_Mark_student       Mark[]       @relation("Mark_student")
  from_Attendance_student Attendance[] @relation("Attendance_student")

  @@index([departmentId])
  @@index([mentorId])
}

model Subject {
  id                String      @id @default(cuid())
  name              String      @default("")
  code              String      @unique @default("")
  students          Student[]   @relation("Student_subjects")
  teacher           Teacher?    @relation("Subject_teacher", fields: [teacherId], references: [id])
  teacherId         String?     @map("teacher")
  department        Department? @relation("Subject_department", fields: [departmentId], references: [id])
  departmentId      String?     @map("department")
  from_Mark_subject Mark[]      @relation("Mark_subject")

  @@index([teacherId])
  @@index([departmentId])
}

model Mark {
  id        String    @id @default(cuid())
  student   Student?  @relation("Mark_student", fields: [studentId], references: [id])
  studentId String?   @map("student")
  subject   Subject?  @relation("Mark_subject", fields: [subjectId], references: [id])
  subjectId String?   @map("subject")
  examType  String?
  score     String    @default("")
  date      DateTime? @default(now())

  @@index([studentId])
  @@index([subjectId])
}

model Attendance {
  id        String    @id @default(cuid())
  student   Student?  @relation("Attendance_student", fields: [studentId], references: [id])
  studentId String?   @map("student")
  status    String?
  date      DateTime? @default(now())

  @@index([studentId])
}
